(println "-->    cobalt constants")

(ns cadejo.instruments.cobalt.constants)

(def max-port-time 0.5)
(def min-buzz-hp-freq 1)
(def max-buzz-hp-freq 9999)
(def min-noise-filter-cutoff 50)        ; Must be > 0
(def min-noise-filter-bw 3)
(def max-noise-filter-bw 100)
(def max-delay-time 2.00)
(def max-db 0)
(def min-db -60)
(def max-keyscale-depth 12)             ; in db
(def min-keyscale-depth (* -1 max-keyscale-depth))
(def min-lfo-frequency 0.01)
(def max-lfo-frequency 50)
(def min-vibrato-sensitivity 0.001)
(def max-vibrato-sensitivity 0.1)
(def min-op-detune 0.1)
(def max-op-detune 127)
(def min-buzz-harmonics 1)
(def max-buzz-harmonics 128)


(def initial-cobalt-program 
     {:port-time 0.0
      :genv1-attack 1.0
      :genv1-decay1 0.0
      :genv1-decay2 0.0
      :genv1-release 0.0
      :genv1-peak 1.0
      :genv1-breakpoint 1.0
      :genv1-sustain 1.0
      :amp<-genv1 0.0
      :genv2-attack 0.0
      :genv2-decay1 0.0
      :genv2-decay2 0.0
      :genv2-release 0.0
      :genv2-peak 1.0
      :genv2-breakpoint 1.0
      :genv2-sustain 1.0
      :pe-a0 0.00
      :pe-a1 0.00
      :pe-a2 0.00
      :pe-a3 0.00
      :pe-t1 1.00
      :pe-t2 1.00
      :pe-t3 1.00
      :lfo1-freq 5.00
      :lfo1<-genv1 0.0
      :lfo1<-cca 0.0
      :lfo1<-pressure 0.0
      :lfo2-freq 2.50
      :lfo2<-genv2 0.0
      :lfo2<-ccb 0.0
      :lfo2<-pressure 0.0
      :op1-amp 1.000
      :op1-amp<-genv1 0.00
      :op1-amp<-genv2 0.00
      :op1-amp<-lfo1 0.00
      :op1-amp<-lfo2 0.00
      :op1-amp<-cca 0.00
      :op1-amp<-ccb 0.00
      :op1-amp<-velocity 0.00
      :op1-amp<-pressure 0.00
      :op1-detune 1.00
      :op1<-penv 0.00
      :op1-attack 0.00
      :op1-decay1 0.00
      :op1-decay2 0.00
      :op1-release 0.00
      :op1-peak 1.00
      :op1-breakpoint 1.00
      :op1-sustain 1.00
      :op2-amp 0.500 
      :op2-amp<-genv1 0.00
      :op2-amp<-genv2 0.00
      :op2-amp<-lfo1 0.00
      :op2-amp<-lfo2 0.00
      :op2-amp<-cca 0.00
      :op2-amp<-ccb 0.00
      :op2-amp<-velocity 0.00
      :op2-amp<-pressure 0.00
      :op2-detune 2.00
      :op2<-penv 0.00
      :op2-attack 0.00
      :op2-decay1 0.00
      :op2-decay2 0.00
      :op2-release 0.00
      :op2-peak 1.00
      :op2-breakpoint 1.00
      :op2-sustain 1.00
      :op3-amp 0.333
      :op3-amp<-genv1 0.00
      :op3-amp<-genv2 0.00
      :op3-amp<-lfo1 0.00
      :op3-amp<-lfo2 0.00
      :op3-amp<-cca 0.00
      :op3-amp<-ccb 0.00
      :op3-amp<-velocity 0.00
      :op3-amp<-pressure 0.00
      :op3-detune 3.00
      :op3<-penv 0.00
      :op3-attack 0.00
      :op3-decay1 0.00
      :op3-decay2 0.00
      :op3-release 0.00
      :op3-peak 1.00
      :op3-breakpoint 1.00
      :op3-sustain 1.00
      :op4-amp 0.250 
      :op4-amp<-genv1 0.00
      :op4-amp<-genv2 0.00
      :op4-amp<-lfo1 0.00
      :op4-amp<-lfo2 0.00
      :op4-amp<-cca 0.00
      :op4-amp<-ccb 0.00
      :op4-amp<-velocity 0.00
      :op4-amp<-pressure 0.00
      :op4-detune 4.00
      :op4<-penv 0.00
      :op4-attack 0.00
      :op4-decay1 0.00
      :op4-decay2 0.00
      :op4-release 0.00
      :op4-peak 1.00
      :op4-breakpoint 1.00
      :op4-sustain 1.00
      :op5-amp 0.200 
      :op5-amp<-genv1 0.00
      :op5-amp<-genv2 0.00
      :op5-amp<-lfo1 0.00
      :op5-amp<-lfo2 0.00
      :op5-amp<-cca 0.00
      :op5-amp<-ccb 0.00
      :op5-amp<-velocity 0.00
      :op5-amp<-pressure 0.00
      :op5-keyscale-key 60 
      :op5-keyscale-left 0 
      :op5-keyscale-right 0
      :op5-detune 5.00
      :op5<-penv 0.00
      :op5-attack 0.00
      :op5-decay1 0.00
      :op5-decay2 0.00
      :op5-release 0.00
      :op5-peak 1.00
      :op5-breakpoint 1.00
      :op5-sustain 1.00
      :op6-amp 0.167 
      :op6-amp<-genv1 0.00
      :op6-amp<-genv2 0.00
      :op6-amp<-lfo1 0.00
      :op6-amp<-lfo2 0.00
      :op6-amp<-cca 0.00
      :op6-amp<-ccb 0.00
      :op6-amp<-velocity 0.00
      :op6-amp<-pressure 0.00
      :op6-keyscale-key 60 
      :op6-keyscale-left 0 
      :op6-keyscale-right 0
      :op6-detune 6.00
      :op6<-penv 0.00
      :op6-attack 0.00
      :op6-decay1 0.00
      :op6-decay2 0.00
      :op6-release 0.00
      :op6-peak 1.00
      :op6-breakpoint 1.00
      :op6-sustain 1.00
      :op7-amp 0.143 
      :op7-amp<-genv1 0.00
      :op7-amp<-genv2 0.00
      :op7-amp<-lfo1 0.00
      :op7-amp<-lfo2 0.00
      :op7-amp<-cca 0.00
      :op7-amp<-ccb 0.00
      :op7-amp<-velocity 0.00
      :op7-amp<-pressure 0.00
      :op7-keyscale-key 60 
      :op7-keyscale-left 0 
      :op7-keyscale-right 0
      :op7-detune 7.00
      :op7<-penv 0.00
      :op7-attack 0.00
      :op7-decay1 0.00
      :op7-decay2 0.00
      :op7-release 0.00
      :op7-peak 1.00
      :op7-breakpoint 1.00
      :op7-sustain 1.00
      :fm7-detune 1.00
      :fm7-bias 0.00
      :fm7-amp 0.00
      :fm7<-env 0.00
      :fm7-keyscale-left 0
      :fm7-keyscale-right 0
      :op8-amp 0.125 
      :op8-amp<-genv1 0.00
      :op8-amp<-genv2 0.00
      :op8-amp<-lfo1 0.00
      :op8-amp<-lfo2 0.00
      :op8-amp<-cca 0.00
      :op8-amp<-ccb 0.00
      :op8-amp<-velocity 0.00
      :op8-amp<-pressure 0.00
      :op8-keyscale-key 60 
      :op8-keyscale-left 0 
      :op8-keyscale-right 0
      :op8-detune 8.00
      :op8<-penv 0.00
      :op8-attack 0.00
      :op8-decay1 0.00
      :op8-decay2 0.00
      :op8-release 0.00
      :op8-peak 1.00
      :op8-breakpoint 1.00
      :op8-sustain 1.00
      :fm8-detune 1.00
      :fm8-bias 0.00
      :fm8-amp 0.00
      :fm8<-env 0.00
      :fm8-keyscale-left 0
      :fm8-keyscale-right 0
      :nse-amp 0.111 
      :nse-amp<-lfo1 0.00
      :nse-amp<-cca 0.00
      :nse-amp<-velocity 0.00
      :nse-amp<-pressure 0.00
      :nse-keyscale-key 60
      :nse-keyscale-left 0
      :nse-keyscale-right 0
      :nse-detune 9.00
      :nse<-penv 0.00
      :nse-attack 0.00
      :nse-decay1 0.00
      :nse-decay2 0.00
      :nse-release 0.00
      :nse-peak 1.00
      :nse-breakpoint 1.00
      :nse-sustain 1.00
      :nse-bw 10
      :bzz-amp 0.030
      :bzz-amp<-genv1 0.00
      :bzz-amp<-genv2 0.00
      :bzz-amp<-lfo1 0.00
      :bzz-amp<-lfo2 0.00
      :bzz-amp<-cca 0.00
      :bzz-amp<-ccb 0.00
      :bzz-amp<-velocity 0.00
      :bzz-amp<-pressure 0.00
      :bzz-keyscale-key 60
      :bzz-keyscale-left 0
      :bzz-keyscale-right 0
      :bzz-detune 1.00
      :bzz<-penv 0.00
      :bzz-attack 0.00
      :bzz-decay1 0.00
      :bzz-decay2 0.00
      :bzz-release 0.00
      :bzz-peak 1.00
      :bzz-breakpoint 1.00
      :bzz-sustain 1.00
      :bzz-harmonics 54
      :bzz-harmonics<-env 0       
      :bzz-harmonics<-cca 0
      :bzz-hp-track 16
      :bzz-hp-track<-env  0.00
      :vibrato-frequency 7.00
      :vibrato-sensitivity 0.01
      :vibrato-depth 0.00
      :vibrato<-pressure 0.00
      :amp -18
      :amp<-velocity 0.00
      :amp<-cc7 0.00
      :xenv-attack 0.00
      :xenv-decay1 0.00
      :xenv-decay2 0.00
      :xenv-release 0.00
      :xenv-peak 1.00
      :xenv-breakpoint 1.00
      :xenv-sustain 1.00
      :lfo3-freq 1.00
      :lfo3-amp<-cca 0
      :lfo3-amp<-ccb 0
      :lfo3-amp<-xenv 0
      :lfo4-freq 0.50
      :lfo4-amp<-cca 0
      :lfo4-amp<-ccb 0
      :lfo4-amp<-xenv 0
      :dry-amp 0
      :dry-pan 0
      :delay1-time 0.500
      :delay1-time<-lfo3 0
      :delay1-time<-lfo4 0
      :delay1-time<-xenv 0
      :delay1-fb 0.5
      :delay1-xfb 0
      :delay1-amp min-db
      :delay1-amp<-lfo3 0
      :delay1-amp<-lfo4 0
      :delay1-amp<-xenv 0
      :delay1-pan -0.7
      :delay1-pan<-lfo3 0
      :delay1-pan<-lfo4 0
      :delay1-pan<-xenv 0
      :delay2-time 0.250
      :delay2-time<-lfo3 0
      :delay2-time<-lfo4 0
      :delay2-time<-xenv 0
      :delay2-fb 0.5
      :delay2-xfb 0
      :delay2-amp min-db
      :delay2-amp<-lfo3 0
      :delay2-amp<-lfo4 0
      :delay2-amp<-xenv 0
      :delay2-pan -0.7
      :delay2-pan<-lfo3 0
      :delay2-pan<-lfo4 0
      :delay2-pan<-xenv 0})


(def ignore-extra-parameters 
  [:nse-amp<-genv1 :nse-amp<-genv2 :nse-amp<-lfo2 :nse-amp<-ccb])

(def cobalt-parameters (flatten 
                        [ignore-extra-parameters
                         (map first (seq initial-cobalt-program))]))
